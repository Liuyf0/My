## 说明

* 在实际开发中，我们把通用的函数和类分文件编写，称之为库。在其它的程序中，可以使用库中的函数和类。
* 一般来说，通用的函数和类不提供源代码文件(安全性、商业机密)，而是编译成二进制文件。
* 库的二进制文件有两种:静态库和动态库。

## 静态库

### 1、制作静态库

```C++
g++ -c -o lib 库名.a 源代码文件清单
```

### 2、使用静态库

```C++
不规范的做法:
g++ 选项 源代码文件名清单 lib 库名.a

规范的做法:
g++ 选项 源代码文件名清单 -l库名 -L文件所在的目录名
```

### 3、静态库的概念

* 程序在编译时会把库文件的二进制代码链接到目标程序中，这种方式称为静态链接。
* 如果多个程序中用到了同一静态库中的函数，就会存在多份拷贝。

### 4、静态库的特点

* 静态库的链接是在编译时期完成的，执行的时候代码加载速度快。
* 目标程序的可执行文件比较大，浪费空间。
* 程序的更新和发布不方便，如果某一个静态库更新了，所有使用它的程序都需要重新编译

## 动态库

### 1、制作动态库

```C++
g++ -fPlC -shared -o lib 库名.so 源代码文件清单
```

### 2、使用动态库

不规范的做法:

```C++
g++ 选项 源代码文件名清单 动态库文件名
```

规范的做法:

```C++
g+＋ 选项 源代码文件名清单 -l库名 -L库文件所在的目录名
```

运行可执行程序的时候，需要提前设置`LD_LIBRARY_PATH `环境变量。

### 3、动态库的概念

* 程序在编译时不会把库文件的二进制代码链接到目标程序中，而是在运行时候才被载入。
* 如果多个程序中用到了同一动态库中的函数，那么在内存中只有一份，避免了空间浪费问题。

### 动态库的特点

* 程序运行在运行的过程中，需要用到动态库的时候才把动态库的二进制代码载入内存。
* 可以实现进程之间的代码共享，因此动态库也称为共享库。
* 程序升级比较简单，不需要重新编译程序，只需要更新动态库就行了。
